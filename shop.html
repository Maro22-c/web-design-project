<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping</title>
    <link rel="icon" href="images/LogoB.png" />
    <link rel="stylesheet" href="css/style.css" />
    <style>
      body {
        padding-top: 100px;
        color: #3e3e3e;
      }

      .container {
        margin: 0;
        text-align: center;
        color: white;
        padding: 10px 0;
        height: 40px;
      }

      .box-container {
        display: flex;
        justify-content: center;
        gap: 40px;
        flex-wrap: wrap;
        padding: 20px;
      }

      .box {
        background-color: white;
        border-radius: 15px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        overflow: hidden;
        width: 200px;
        transition: transform 0.3s;
      }
      .box:hover {
        transform: translateY(-5px);
      }
      .box img {
        display: block;
        width: 100%;
        height: 60%;
      }
      .box h3 {
        font-size: 17px;
        padding: 10px;
        color: #3e3e3e;
      }
      .box p {
        padding: 0 10px;
        font-size: 15px;
        color: #666;
        margin-bottom: 10px;
      }
      .price {
        font-weight: bold;
        color: black;
        padding: 0 10px 10px;
      }
      .box button {
        display: block;
        width: 90%;
        margin: 0 10px 15px;
        padding: 10px;
        color: white;
        background-color: #c9a66b;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 15px;
      }
      .box button:hover {
        background-color: #8b5e3c;
      }
    </style>
  </head>
  <script src="auth.js"></script>
<script src="cart.js"></script>
<script>
  // Example: set current user (simulate sign-in)
  // You will need a sign-in page or logic to set loggedInUser properly
  // For test, you can manually call:
  // signIn("user1", "pass1");

  // Show welcome message somewhere, or just alert
  if (!isSignedIn()) {
    alert("Please sign in first.");
    // redirect to sign in page or show sign in form
    window.location.href = "SignInPage.html"; // adjust path as needed
  } else {
    console.log("Welcome", getCurrentUser().username);
  }

  // Attach Add to Cart handlers
  document.querySelectorAll("button[data-title]").forEach(btn => {
    btn.addEventListener("click", () => {
      if (!isSignedIn()) {
        alert("You must sign in to add items to cart.");
        window.location.href = "SignInPage.html";
        return;
      }
      const title = btn.getAttribute("data-title");
      const price = btn.getAttribute("data-price");
      const result = addToCart({ title, price });
      alert(result.message);
    });
  });

  // Add any other UI code you want here (view cart button, sign out button, etc.)
</script>

  <body>
    <a href="cart.html" class="cart-float" title="View Cart">
      <img src="images/LogoB.png" alt="Cart Icon" />
    </a>

    <header class="navbar">
      <div class="logo">
        <a href="Home Page.html">
          <img src="images/LogoB.png" alt="Bookstore Logo" width="100" />
        </a>
      </div>
      <nav>
        <a href="Home Page.html">Home</a>
        <a href="shop.html">Shop</a>
        <a href="contact.html">Contact Us</a>
        <a href="cart.html">Cart</a>
        <a href="SignIn.html">Sign In</a>
      </nav>
    </header>

    <h2
      style="background: url(images/Fiction.jpg); background-position: center"
      class="container"
    >
      Fiction
    </h2>

    <section id="fiction">
      <div class="box-container">
        <div class="box">
          <img src="images/Books/Hobbit.jpg" alt="The Hobbit cover" />
          <h3>The Hobbit</h3>
          <p>by J.R.R. Tolkien</p>
          <p class="price">$12.99</p>
          <button data-title="The Hobbit" data-price="12.99">
            Add to Cart
          </button>
        </div>

        <div class="box">
          <img
            src="images/Books/Midnight.jpg"
            alt="The Midnight Library cover"
          />
          <h3>The Midnight Library</h3>
          <p>by Matt Haig</p>
          <p class="price">$14.99</p>
          <button data-title="The Midnight Library" data-price="14.99">
            Add to Cart
          </button>
        </div>

        <div class="box">
          <img
            src="images/Books/where-crawdads.jpg"
            alt="Where the Crawdads Sing cover"
          />
          <h3>Where the Crawdads Sing</h3>
          <p>by Delia Owens</p>
          <p class="price">$13.49</p>
          <button data-title="Where the Crawdads Sing" data-price="13.49">
            Add to Cart
          </button>
        </div>

        <div class="box">
          <img src="images/Books/1984.jpg" alt="1984 cover" />
          <h3>1984</h3>
          <p>by George Orwell</p>
          <p class="price">$9.99</p>
          <button data-title="1984" data-price="9.99">Add to Cart</button>
        </div>
      </div>
    </section>

    <script src="js/Main.js"></script>
    <script src="js/Cart.js"></script>

    <script src="js/Main.js"></script>
  </body>
</html>
